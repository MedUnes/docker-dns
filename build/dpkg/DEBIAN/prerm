#!/bin/bash
set -e

SERVICE=docker-dns

if systemctl is-active --quiet "$SERVICE.service"; then
    echo "Stopping $SERVICE.service in prerm..."
    systemctl stop "$SERVICE.service" || true
fi

# Extra: check and kill lingering process early
if pgrep -f "$SERVICE" >/dev/null; then
    echo "Force-killing lingering docker-dns processes in prerm..."
    pkill -f "$SERVICE" || true
fi

exit 0
