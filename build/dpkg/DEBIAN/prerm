#!/bin/bash
set -e

SERVICE=docker-dns
BIN=/usr/bin/docker-dns

if systemctl is-active --quiet "$SERVICE.service"; then
    echo "Stopping $SERVICE.service in prerm..."
    systemctl stop "$SERVICE.service" || true
fi

# Kill lingering docker-dns binary ONLY
echo "Force-killing lingering docker-dns binary in prerm..."
pgrep -f "^$BIN" | xargs --no-run-if-empty kill -9 || true

exit 0
